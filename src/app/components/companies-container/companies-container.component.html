<ng-container *ngIf="{ companies: filteredCompanies$ | async } as data">
  <div class="table-container">
    <table
      class="companies-table"
      [class.full-height]="data.companies && data.companies.length < 1"
    >
      <thead>
        <tr>
          <th class="column-id" (click)="sortTable('id')">
            <span>Id</span>
          </th>
          <th (click)="sortTable('name')">
            <span>Name</span>
          </th>
          <th class="column-details" (click)="sortTable('city')">
            <span>City</span>
          </th>
          <th class="column-details" (click)="sortTable('totalIncome')">
            <span>Total</span>
          </th>
          <th class="column-details" (click)="sortTable('averageIncome')">
            <span>Average</span>
          </th>
          <th class="column-details" (click)="sortTable('lastMonthIncome')">
            <span>Last month</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <ng-container
          *ngIf="data.companies && data.companies.length > 0; else noRecords"
        >
          <tr *ngFor="let company of data.companies">
            <td class="column-id" data-label="Id">
              {{ company.id }}
            </td>
            <td data-label="Name">
              {{ company.name }}
            </td>
            <td class="column-details" data-label="City">
              {{ company.city }}
            </td>
            <td class="column-details" data-label="Total">
              {{ company.totalIncome }}
            </td>
            <td class="column-details" data-label="Average">
              {{ company.averageIncome }}
            </td>
            <td class="column-details" data-label="Last month">
              {{ company.lastMonthIncome }}
            </td>
          </tr>
        </ng-container>
        <ng-template #noRecords>
          <td class="text-center" colspan="6">
            Brak rekord√≥w dla danej frazy
          </td></ng-template
        >
      </tbody>
    </table>
  </div>

  <app-table-footer
    [avaliablePages]="avaliablePages"
    [page]="currentPage"
    (changePageNumber)="onChangePageNumber($event)"
  ></app-table-footer>
</ng-container>
